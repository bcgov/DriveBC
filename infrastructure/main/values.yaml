nameOverride: drivebc
fullnameOverride: drivebc

django:
  fullnameOverride: django
  nameOverride: django
  replicaCount: 1
  image:
    repository: ghcr.io/bcgov/drivebc-django
    tag: latest
  deployment:
    resources:
      requests:
        cpu: 50m
        memory: 250Mi
      limits:
        cpu: 500m
        memory: 350Mi
    env:
      postgresSecret: drivebc-pguser-drivebc
      djangoConfigMap: drivebc-django
      djangoSecret: drivebc-django
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 2
    targetCPUUtilizationPercentage: 75
  route:
    host: drivebc.apps.gold.devops.gov.bc.ca
    iprestricted: false #Set to true if you want to limit IP's the the addresses in the ipallowlist 
  mediapvc:
    storage: 1Gi
  apppvc:
    storage: 1Gi

tasks:
  fullnameOverride: tasks
  nameOverride: tasks
  replicaCount: 1
  image:
    repository: ghcr.io/bcgov/drivebc-django
    tag: latest
  deployment:
    resources:
      requests:
        cpu: 75m
        memory: 150Mi
      limits:
        cpu: 250m
        memory: 200Mi
    volumes:
      claimName: django-app-images
    env:
      postgresSecret: drivebc-pguser-drivebc
      djangoConfigMap: drivebc-django
      djangoSecret: drivebc-django

redis:
  fullnameOverride: redis
  nameOverride: redis
  replicaCount: 1
  image:
    repository: ghcr.io/bcgov/drivebc-redis
    tag: latest
  deployment:
    resources:
      requests:
        cpu: 50m
        memory: 50Mi
      limits:
        cpu: 100m
        memory: 100Mi

static:
  fullnameOverride: static
  nameOverride: static
  replicaCount: 1
  image:
    repository: ghcr.io/bcgov/drivebc-static
    tag: latest
  deployment:
    resources:
      requests:
        cpu: 50m
        memory: 50Mi
      limits:
        cpu: 150m
        memory: 100Mi
    env:
      staticConfigMap: drivebc-static
    volumes:
      imagesClaimName: django-app-images
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 2
    targetCPUUtilizationPercentage: 75
  route:
    host: drivebc.apps.gold.devops.gov.bc.ca
    iprestricted: false  #Set to true if you want to limit IP's the the addresses in the ipallowlist 
  logpvc:
    storage: 1Gi

openshiftjobs:
  fullnameOverride: openshiftjobs
  nameOverride: openshiftjobs

  image:
    repository: ghcr.io/bcgov/drivebc-openshiftjobs
    tag: latest

  cronjobs:
    analyzeuploadlogs:
      name: analyzeuploadlogs
      schedule: '0 9 * * *'  #NOTE: This is in UTC
      deployment:
        resources:
          requests:
            cpu: 50m
            memory: 1Gi
          limits:
            cpu: 2000m
            memory: 2Gi
        env:
          s3Secret: drivebc-cronjob-s3bucket
        volumes:
          logs: static-log-storage
    ziplogs:
      name: ziplogs
      schedule: '30 * * * *'
      deployment:
        resources:
          requests:
            cpu: 50m
            memory: 100Mi
          limits:
            cpu: 150m
            memory: 200Mi
        volumes:
          logs: static-log-storage
    
    backupmediapvc:
      name: backupmediapvc
      schedule: '0 8 * * *'
      deployment:
        resources:
          requests:
            cpu: 50m
            memory: 100Mi
          limits:
            cpu: 100m
            memory: 250Mi
        env:
          s3Secret: drivebc-cronjob-s3bucket
        volumes:
          media: django